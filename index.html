<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Ravenclaw Entry</title>

    <!-- Mobile-first viewport (QR friendly) -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Prevent auto-formatting on mobile -->
    <meta name="format-detection" content="telephone=no" />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <main class="wrap">
      <section class="card" role="region" aria-label="Ravenclaw Riddle Gate">
        <header class="header">
          <div class="crest" aria-hidden="true">ðŸ¦…</div>
          <div>
            <h1>Ravenclaw</h1>
            <p class="subtitle">
              If it is entry that you seek,<br />
              then answer true â€” let wit, not might, speak.
            </p>
          </div>
        </header>

        <div class="divider"></div>

        <article class="riddle">
          <p>
            <span class="dropcap">I</span> exist only after passing,<br />
            and vanish where I am made.<br />
            I speak in pairs and silence,<br />
            proof without witness laid.<br />
            I am never ahead of you,<br />
            yet follow where you go.<br />
            Name me.
          </p>
        </article>

        <form id="riddleForm" class="form" autocomplete="off">
          <label for="answer" class="label">Your answer</label>

          <div class="inputRow">
            <input
              id="answer"
              name="answer"
              type="text"
              placeholder="Type your answerâ€¦"
              inputmode="text"
              autocapitalize="off"
              autocomplete="off"
              autocorrect="off"
              autofocus
              required
            />
            <button type="submit" class="btn">Enter</button>
          </div>

          <p id="feedback" class="feedback" aria-live="polite"></p>
        </form>

        <footer class="footer">
          <p class="small">Knowledge is the only key.</p>
        </footer>
      </section>
    </main>

    <!-- Obfuscated answer logic -->
    <script>
      (function () {
        const encoded = [102, 111, 111, 116, 115, 116, 101, 112, 115];
        const answer = String.fromCharCode(...encoded);

        const form = document.getElementById("riddleForm");
        const input = document.getElementById("answer");
        const feedback = document.getElementById("feedback");

        function normalize(s) {
          return s
            .toLowerCase()
            .trim()
            .replace(/[^\p{L}\p{N}]/gu, "");
        }

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          const guess = normalize(input.value);

          if (guess === answer) {
            feedback.textContent =
              "Correct. The door yields. Proceed. âœ¨";
            feedback.className = "feedback ok";
            input.disabled = true;
            form.querySelector("button").disabled = true;
          } else {
            feedback.textContent =
              "Not quite. Think again, clever one.";
            feedback.className = "feedback bad";
            input.focus();
            input.select();
            if (navigator.vibrate) navigator.vibrate(30);
          }
        });
      })();
    </script>
  </body>
</html>
